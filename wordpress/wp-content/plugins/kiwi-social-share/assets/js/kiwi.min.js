"use strict";var kiwi={loaded:0,interface:{saveChangesNotification:function(a){var b=a("#sl-kiwi"),c=b.find(".kiwi-notification-popup"),d=c.find("input"),e=b.find("form").find("#submit");b.find("input").on("change",function(){c.slideDown(300)}),d.on("click",function(){e.click()})},preloader:function(a){var b=a("#sl-kiwi"),c=b.find(".overlay"),d=a('ul[data-id="networks_ordering_floating_bar"]');setTimeout(function(){c.find(".overlay-content").fadeOut(400,function(){c.removeClass("active").css({"z-index":0,bottom:"initial",right:"initial"}),d.css({right:"-46px",opacity:1,"z-index":1})})},1500)},colorFields:function(a){var b=a(".kiwi-styles .epsilon-ui-color input"),c=a(".kiwi-styles .epsilon-custom-colors .epsilon-ui-color input");a(".shift a");b.wpColorPicker(),a('input[name="kiwi_general_settings[styles_colors]"]:radio').change(function(){var b=a(this).val();switch(b){case"custom":a.each(c,function(){a(this).val(a(this).data("color-custom")).trigger("change")});break;case"monochrome":a.each(c,function(){a(this).val(a(this).data("color-monochrome")).trigger("change")});break;default:a.each(c,function(){a(this).val(a(this).data("color-original")).trigger("change")})}}),a.each(b,function(){var b=a(this).parents(".epsilon-ui-color"),c=b.find("em"),d=a(this),e=b.parent().parent().data("network");a(".shift").find(".kiwi-nw-"+e),d.wpColorPicker("color"),b.attr("data-prop");a(this).wpColorPicker({change:function(a,b){var e=d.wpColorPicker("color");c.html(e)}})});var d=a(".floating-bar-background input");d.length&&d.wpColorPicker({defaultColor:"#272F32",change:function(b,c){var e=d.wpColorPicker("color");a(".floating-bar-background").find("em").html(e)}}),kiwi.loaded+=1},toggleHelper:function(a){a(".epsilon-ui-option input").keypress(function(b){var c=a(this).closest(".epsilon-ui-option").find(".epsilon-ui-overlay.active").length;c&&b.keyCode>36&&b.keyCode<41&&b.preventDefault()}),kiwi.loaded+=1},tabs:function(a){a(".epsilon-ui-tabs a").click(function(){if(a(this).closest("li").hasClass("selected"))return 0;var b=a(this).attr("data-tab");return a(this).closest("ul").find(".selected").removeClass("selected"),a(this).closest("li").addClass("selected"),a(".sl-kiwi-content .epsilon-tab-active").removeClass("epsilon-tab-active"),a(".sl-kiwi-content ."+b).addClass("epsilon-tab-active"),document.cookie="tab="+b,a(document).trigger("KiwiTabChanged"),!1}),kiwi.loaded+=1}},interactions:{registration:function(a){a(".kiwi-ajax-activation").on("click",function(b){b.preventDefault();var c={action:"kiwi_social_share_set_option",args:{group:"kiwi_registration",option:"license_key",default:!1,value:a(this).parent().find("#kiwi_pro_registration").val()}};jQuery.ajax({dataType:"json",type:"POST",url:ajaxurl,data:c,complete:function(a){a.responseText&&"Success"===a.responseText&&location.reload()}})}),a(".kiwi-ajax-registration-action").on("click",function(b){b.preventDefault();var c=a(this),d={action:"kiwi_social_share_edd_helper",args:{todo:a(this).attr("data-action")}};jQuery.ajax({dataType:"json",type:"POST",url:ajaxurl,data:d,complete:function(a){if(a.responseJSON.status)switch(a.responseJSON.message){case"active":c.attr("data-action","deactivate").addClass("button").removeClass("button-primary").val("Deactivate License");break;case"site_inactive":c.attr("data-action","activate").addClass("button-primary").removeClass("button").val("Activate License")}}})})},networks:function(a){a('.sl-kiwi-tab-networks .sl-kiwi-networks input[data-source="article-bar"]').on("click change",function(){var b=a(this).attr("data-list-item");a(this).is(":checked")?a('.sl-kiwi-dragdrop ul[data-id="networks_ordering"] li .'+b).closest("li").removeClass("sl-kiwi-item-remove").addClass("sl-kiwi-item-add"):a('.sl-kiwi-dragdrop ul[data-id="networks_ordering"] li .'+b).closest("li").removeClass("sl-kiwi-item-add").addClass("sl-kiwi-item-remove")}),a('.sl-kiwi-tab-networks .sl-kiwi-networks input[data-source="floating-bar"]').on("click change",function(){var b=a(this).attr("data-list-item");a(this).is(":checked")?a('.sl-kiwi-dragdrop ul[data-id="networks_ordering_floating_bar"] li .'+b).closest("li").removeClass("sl-kiwi-item-remove").addClass("sl-kiwi-item-add"):a('.sl-kiwi-dragdrop ul[data-id="networks_ordering_floating_bar"] li .'+b).closest("li").removeClass("sl-kiwi-item-add").addClass("sl-kiwi-item-remove")}),kiwi.loaded+=1},articleStyling:function(a){a('input[name="kiwi_general_settings[article_bar_style]"]:radio').change(function(){a(".sl-kiwi-dragdrop").find("[data-id='networks_ordering']").attr("data-style",this.value)})},toggles:function(a){a(".epsilon-ui-toggle input").click(function(){a(this).prop("checked")?a(this).val("on"):a(this).val("");var b=a(this).closest(".sl-kiwi-opt-group");a(this).is(":checked")?a(".epsilon-ui-overlay",b).removeClass("active"):a(".epsilon-ui-overlay",b).addClass("active")}),kiwi.loaded+=1},radioToggles:function(a){a(".sl-kiwi-radio-post-types .epsilon-ui-radio input").click(function(){"all"===a(this).val()?a(this).parent().parent().find(".epsilon-ui-checklist").slideUp():"custom"===a(this).val()&&a(this).parent().parent().find(".epsilon-ui-checklist").slideDown()}),a(".epsilon-ui-radio-toggle input").click(function(){"original"===a(this).val()?a(this).parents(".sl-kiwi-tab-networks").find(".epsilon-ui-overlay").addClass("active"):a(this).parents(".sl-kiwi-tab-networks").find(".epsilon-ui-overlay").removeClass("active")}),kiwi.loaded+=1},shapes:function(a){a('input[name="kiwi_general_settings[button_shape]"]:radio').change(function(){a(".sl-kiwi-dragdrop").find("[data-id='networks_ordering']").attr("class",this.value)}),a('input[name="kiwi_general_settings[button_shape_floating]"]:radio').change(function(){a(".sl-kiwi-dragdrop").find("[data-id='networks_ordering_floating_bar']").attr("class",this.value)}),kiwi.loaded+=1},allCheckbox:function(a){var b,c=a('input[name="kiwi_general_settings[networks_floating_bar][]"]'),d=a('input[name="kiwi_general_settings[networks_floating_bar][]"]:checked'),e=a('input[name="kiwi_general_settings[networks_article_bar][]"]'),f=a('input[name="kiwi_general_settings[networks_article_bar][]"]:checked');c.length===d.length&&a("#floating-bar-all").prop("checked",!0),e.length===f.length&&a("#social-bar-all").prop("checked",!0),a("#social-bar-all, #floating-bar-all").on("click",function(c){switch(a(this).attr("id")){case"floating-bar-all":b=a(this).prop("checked"),a('input[name="kiwi_general_settings[networks_floating_bar][]"]').prop("checked",b).change();break;default:b=a(this).prop("checked"),a('input[name="kiwi_general_settings[networks_article_bar][]"]').prop("checked",b).change()}})},sortable:function(a){var b=a(".sl-kiwi-dragdrop ul[data-id='networks_ordering']");b.sortable({placeholder:"sl-kiwi-dragdrop-placeholder",stop:function(b,c){var d=[],e=a(this).attr("data-id");a('.sl-kiwi-dragdrop ul[data-id="networks_ordering"] li').each(function(b,c){var e=a(c).attr("data-item");d.push(e)});var f=d.join();a("#kiwi_"+e).val(f).trigger("change")},create:function(a,b){kiwi.loaded+=1}}).disableSelection()},upsellModalPage:function(a){var b=a(".kiwi-modal");a(".ui-locked, .epsilon-ui-locked, .epsilon-locked").on("click",function(a){b.fadeIn(200,function(){b.addClass("in")})}),a('input[name="kiwi_product_upsell[type]"]').on("change",function(){"business"===a(this).val()?a(".kiwi-modal").find(".company-group").fadeIn(300):(b.find(".company-group").fadeOut(300),b.find(".company-group input").val(""))}),a(".kiwi-modal .close-modal").on("click",function(a){a.preventDefault(),b.removeClass("in"),setTimeout(function(){b.fadeOut(200),b.find("#page-one").show(),b.find("#page-two").hide(),b.find(".modal-footer").show(),b.find(".modal-title").text(kiwi_locale.kiwi_step_one_title),b.find(".modal-subtitle").text(kiwi_locale.kiwi_step_one_subtitle)},200)}),a(".button-modal").on("click",function(b){b.preventDefault();var c=a(this).attr("data-action");if("modal-buy-now"===c){var d=a("#page-one"),e=a("#page-two"),f=a(".kiwi-modal .modal-footer"),g=a(".kiwi-modal .modal-header-content"),h=g.find(".modal-title"),i=g.find(".modal-subtitle");h.fadeOut(300,function(){h.text(kiwi_locale.kiwi_step_two_title),h.fadeIn(300)}),i.fadeOut(300,function(){i.text(kiwi_locale.kiwi_step_two_subtitle),i.fadeIn(300)}),f.fadeOut(300),d.fadeOut(300,function(){e.fadeIn(300)})}})},handleModalPageForm:function(a){a(".button-modal").on("click",function(b){b.preventDefault();var c=a(this).attr("data-action");if("continue-to-checkout"===c){var d={customer:{first_name:a('input[name="kiwi_product_upsell[first_name]"]').val(),last_name:a('input[name="kiwi_product_upsell[last_name]"]').val(),email:a('input[name="kiwi_product_upsell[email]"]').val(),vat:a('input[name="kiwi_product_upsell[vat]"]').val(),company_name:a('input[name="kiwi_product_upsell[company_name]"]').val()},product:{id:a('input[name="kiwi_product_upsell[product]"]').val(),options:{},quantity:"1"}},e=JSON.stringify(d),f=encodeURIComponent(btoa(e)),g=window.open("https://www.machothemes.com/checkout/?mthash="+f);window.focus&&g.focus()}})}},frontend:{modalPopup:function(a){a('a[data-class="popup"]').on("click",function(b){b.preventDefault();var c,d=window.open(a(this).attr("href"),"","height=500,width=500");window.focus&&d.focus();var e,f=a(this).attr("data-network"),g=a(this).parent();return g.is("li")?(e=g.parent().attr("data-tracking-container"),c=kiwi.frontend.checkTracking(this)):g.is("blockquote")&&(e="click-to-tweet",c="true"===a(this).attr("data-tracking")),"function"==typeof ga&&!0===c&&ga("send","event","kiwi_social_media","kiwi_"+e+"_"+f+"_share"),!1})},highlighted:{start:0,end:0,url:null,title:null,content:null},highlightShare:function(a){var b=a(".kiwi-highlighter-excerpt-area, .kiwi-highlighter-content-area");a(".kiwi-highlight-sharer a").on("click",function(b){b.preventDefault();var c=kiwi.frontend.highlighted,d=null;kiwi.frontend.highlighted={},d=this.href.replace("%url%",encodeURIComponent(c.url)),d=d.replace("%text%",encodeURIComponent(c.content)),window.open(d,"tweethighlight","width=575,height=430,toolbar=false,menubar=false,location=false,status=false");var e="true"===a(this).attr("data-tracking");if("function"==typeof ga&&!0===e){var f="twitter",g="highlight-to-tweet";ga("send","event","kiwi_social_media","kiwi_"+g+"_"+f+"_share")}return a(".kiwi-highlight-sharer").css({display:"none"}),!1}),a("body").on("mousedown vmouseup",function(b){var c=a(b.target).parent(),d=a(".kiwi-highlight-sharer");c.hasClass("kiwi-highlight-sharer")||c.is("a")||d.is(":not(:hidden)")&&d.css({display:"none"})}),b.on("mousedown vmouseup",function(b){kiwi.frontend.highlighted.start=b.pageX;var c=a(".kiwi-highlight-sharer");c.is(":not(:hidden)")&&c.css({display:"none"})}),b.on("mouseup vmouseup",function(b){var c=kiwi.frontend.getSelected(),d=a(".kiwi-highlight-sharer");if(kiwi.frontend.highlighted.end=b.pageX,"undefined"==typeof c)return void d.css({display:"none"});var e={start:b.pageX,end:b.pageX,url:a(this).attr("data-url"),title:a(this).attr("data-title"),content:c},f=parseInt(Math.abs((kiwi.frontend.highlighted.start-kiwi.frontend.highlighted.end)/2));d.css({position:"absolute",left:b.pageX-f,top:b.pageY-50,display:"block"}),kiwi.frontend.highlighted=e}),document.addEventListener("selectionchange",function(){kiwi.frontend.getSelected()},!1)},getSelected:function(){var a=window.getSelection(),b=a.toString();if(""!==b)return b},checkTracking:function(a){var b=jQuery(a).parents("ul");return"true"===b.attr("data-tracking")},handleFloatingBarDisplay:function(a){var b,c=a(".kiwi-floating-bar");b=c.hasClass("bottom")?"bottom":c.hasClass("right")?"right":"left",setTimeout(function(){switch(b){case"bottom":c.css({bottom:0});break;case"right":c.css({right:0});break;default:c.css({left:0})}},300)}},init:function(a){kiwi.interface.tabs(a),kiwi.interface.toggleHelper(a),kiwi.interface.colorFields(a),kiwi.interface.saveChangesNotification(a),kiwi.interactions.toggles(a),kiwi.interactions.radioToggles(a),kiwi.interactions.networks(a),kiwi.interactions.shapes(a),kiwi.frontend.modalPopup(a),kiwi.interactions.sortable(a),kiwi.interactions.allCheckbox(a),kiwi.interactions.articleStyling(a);var b=setInterval(function(){kiwi.loaded>=8&&(a(document).trigger("KiwiObjectsLoaded"),clearInterval(b))},100)}};